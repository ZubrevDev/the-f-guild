# üéØ –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–î - –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´

## üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ü—É—Å—Ç–æ–π API endpoint `/api/character/route.ts`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –º–æ–∫-–¥–∞–Ω–Ω—ã–º–∏ –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ö–µ–º–∞ seed –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞–º–∏
- –ü–ª–æ—Ö–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ UI

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

#### 1. **API Endpoints** 
- **`/api/character/route.ts`** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
- **`/api/quests/route.ts`** - —É–ª—É—á—à–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **`/api/quests/[questId]/route.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π (–ø—Ä–∏–Ω—è—Ç—å/–≤—ã–ø–æ–ª–Ω–∏—Ç—å/–æ–¥–æ–±—Ä–∏—Ç—å)
- **`/api/status/database/route.ts`** - –Ω–æ–≤—ã–π endpoint –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### 2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- **`prisma/seed_fixed.ts`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã, —Å–≤—è–∑–∏, enum –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ ID: `char-alice`, `char-max`, `test-guild-id`
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

#### 3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- **`player/page.tsx`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **`CharacterSheet.tsx`** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
- **`DatabaseStatusChecker.tsx`** - –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ loading —Å–æ—Å—Ç–æ—è–Ω–∏–π

#### 4. **–£—Ç–∏–ª–∏—Ç—ã**
- **`init-db.js`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- **`check-db.ts`** - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î
- **`package.json`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ npm scripts

---

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
```bash
npm run fix-db
```
–∏–ª–∏ 
```bash
node init-db.js
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
npm run db:check
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫
```bash
npm run dev
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/player

---

## üîç –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

**1. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π:**
```bash
npm run db:check
```
–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 3
- –ì–∏–ª—å–¥–∏–π: 1  
- –ü–µ—Ä—Å–æ–Ω–∞–∂–µ–π: 2
- –ö–≤–µ—Å—Ç–æ–≤: 4
- –≠—Ñ—Ñ–µ–∫—Ç–æ–≤: 3
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: 4

**2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
- –í Console –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ API
- –í Network tab –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200

**3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π:**
- [ ] –ü—Ä–æ—Ñ–∏–ª—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç—ã (–±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ, —É—Å—Ç–∞–ª–æ—Å—Ç—å)
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
- [ ] –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∫–≤–µ—Å—Ç
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- **gm-user-id**: –ì–∏–ª–¥-–º–∞—Å—Ç–µ—Ä (guildmaster@example.com)
- **player1-user-id**: –ê–ª–∏—Å–∞ (alice@example.com) 
- **player2-user-id**: –ú–∞–∫—Å (max@example.com)

### –ü–µ—Ä—Å–æ–Ω–∞–∂–∏:
- **char-alice**: –ê–ª–∏—Å–∞ –•—Ä–∞–±—Ä–∞—è, üë∏ –ü–∞–ª–∞–¥–∏–Ω –ü–æ—Ä—è–¥–∫–∞
  - –£—Ä–æ–≤–µ–Ω—å 7 (650/1000 XP)
  - –ú–æ–Ω–µ—Ç—ã: 2ü•á 5ü•à 12ü•â
  - –≠—Ñ—Ñ–µ–∫—Ç—ã: ‚ú® –ë–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ –¢—Ä—É–¥–æ–ª—é–±–∏—è, üò¥ –£—Å—Ç–∞–ª–æ—Å—Ç—å

- **char-max**: –ú–∞–∫—Å –ú—É–¥—Ä–µ—Ü, üßô‚Äç‚ôÇÔ∏è –í–æ–ª—à–µ–±–Ω–∏–∫ –ó–Ω–∞–Ω–∏–π  
  - –£—Ä–æ–≤–µ–Ω—å 4 (280/500 XP)
  - –ú–æ–Ω–µ—Ç—ã: 1ü•á 3ü•à 8ü•â
  - –≠—Ñ—Ñ–µ–∫—Ç—ã: üå™Ô∏è –ü—Ä–æ–∫–ª—è—Ç–∏–µ –ë–µ—Å–ø–æ—Ä—è–¥–∫–∞

### –ö–≤–µ—Å—Ç—ã:
- **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π**: "–í—ã—É—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —É–º–Ω–æ–∂–µ–Ω–∏—è –Ω–∞ 7" (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —É –ê–ª–∏—Å—ã)
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π**: "–ü–æ–º—ã—Ç—å –ø–æ—Å—É–¥—É –ø–æ—Å–ª–µ –æ–±–µ–¥–∞" (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —É –ú–∞–∫—Å–∞)
- **–°–µ–º–µ–π–Ω—ã–π**: "–°–µ–º–µ–π–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫" (–¥–æ—Å—Ç—É–ø–µ–Ω)
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π**: "–£–±—Ä–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É" (–¥–æ—Å—Ç—É–ø–µ–Ω)

---

## üõ†Ô∏è Troubleshooting

### ‚ùå "Character not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –ø–µ—Ä—Å–æ–Ω–∞–∂–∞  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `char-alice`

### ‚ùå "Guild ID is required"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ —Å–≤—è–∑–∞–Ω —Å –≥–∏–ª—å–¥–∏–µ–π  
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å seed: `npm run db:seed-fixed`

### ‚ùå "Database connection failed"
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–∑–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞  
**–†–µ—à–µ–Ω–∏–µ:** `rm prisma/dev.db && npm run fix-db`

### ‚ùå –ü—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network –≤ DevTools, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### ‚ùå –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø enum –≤ –ë–î  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ seed_fixed.ts –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìà API Reference

### Character API
```http
GET /api/character?characterId=char-alice
```
**Response:**
```json
{
  "data": {
    "character": { ... },
    "activeEffects": [ ... ],
    "recentActivity": [ ... ]
  }
}
```

### Quests API  
```http
GET /api/quests?guildId=test-guild-id&status=AVAILABLE
PUT /api/quests/{id}
  Body: { "action": "accept", "characterId": "char-alice" }
```

### Database Status
```http
GET /api/status/database
```

---

## üéÆ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞
1. –û—Ç–∫—Ä—ã—Ç—å `/player`
2. –î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ê–ª–∏—Å—ã –•—Ä–∞–±—Ä–∞–π
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è 2 —ç—Ñ—Ñ–µ–∫—Ç–∞ (–±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ + —É—Å—Ç–∞–ª–æ—Å—Ç—å)
4. –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—É—Ä–æ–≤–µ–Ω—å 7, –º–æ–Ω–µ—Ç—ã)

### 2. –ü—Ä–∏–Ω—è—Ç–∏–µ –∫–≤–µ—Å—Ç–∞
1. –í —Ä–∞–∑–¥–µ–ª–µ "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–≤–µ—Å—Ç—ã" –Ω–∞–∂–∞—Ç—å "–í–∑—è—Ç—å"
2. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ö–≤–µ—Å—Ç –ø—Ä–∏–Ω—è—Ç!"
3. –ö–≤–µ—Å—Ç –∏—Å—á–µ–∑–Ω–µ—Ç –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
1. –í —Ä–∞–∑–¥–µ–ª–µ "–ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" 
2. –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–∞—Ö
3. –° –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

---

## üîß NPM Scripts

```bash
# –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î
npm run fix-db

# –¢–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
npm run db:init  

# –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run db:check

# –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–π seed
npm run db:seed-fixed

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
npm run db:studio
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] `npm run db:check` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] `/player` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
- [ ] –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —á–∏—Å—Ç–∞—è
- [ ] –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–≤–µ—Å—Ç—ã
- [ ] –≠—Ñ—Ñ–µ–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200

**üéâ –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ —Å –º–æ–∫-–¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.**
